<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="ru"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SubscriptionDao.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">IPS Maven Webapp</a> &gt; <a href="index.source.html" class="el_package">com.dao</a> &gt; <span class="el_source">SubscriptionDao.java</span></div><h1>SubscriptionDao.java</h1><pre class="source lang-java linenums">package com.dao;

import com.exceptions.SubscriptionException;
import com.exceptions.TariffException;
import com.exceptions.UserException;
import com.model.ServiceType;
import com.model.Subscription;
import com.model.Tariff;
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import java.sql.*;
import java.time.LocalDateTime;
import java.util.ArrayList;
import java.util.List;

<span class="nc" id="L17">public class SubscriptionDao implements Dao&lt;Subscription&gt; {</span>
    private static final String FIND_ALL_BY_SERVICE = &quot;select *from tariffs where service_type=?&quot;;
    private static final String CREATE_QUERY = &quot;insert into subscriptions(name,days_amount,isActive,created, updated) values (?,?,?,?,?)&quot;;
    private static final String FIND_BY_FIELD_QUERY = &quot;select * from subscriptions where name = ?&quot;;
    private static final String FIND_BY_ID_QUERY = &quot;select * from subscriptions where id = ?&quot;;
    private static final String UPDATE_QUERY = &quot;UPDATE subscriptions SET name= ?, days_amount = ?, isActive = ?, updated = now() WHERE name = ?&quot;;
    private static final String UPDATE_QUERY_ID = &quot;UPDATE subscriptions SET name=?,days_amount = ?,isActive = ? WHERE id = ?&quot;;
    private static final String DELETE_QUERY = &quot;DELETE  FROM subscriptions WHERE id=?&quot;;
    private static final String FIND_ALL_QUERY = &quot;select * from subscriptions&quot;;
    private static final String SQL_CALC_FOUND_ROWS = &quot;select SQL_CALC_FOUND_ROWS * from subscriptions limit ?, ?&quot;;
    private static final String SELECT_ALL_TARIFFS_QUERY = &quot;select * from subscriptions_tariffs where subscription_id=?&quot;;
    private static final String ADD_TARIFF_QUERY = &quot;insert into subscriptions_tariffs(subscription_id,tariff_id ) values (?,?)&quot;;
<span class="nc" id="L29">    private TariffDao tariffDao = new TariffDao();</span>
<span class="nc" id="L30">    private static Logger logger = LogManager.getLogger(SubscriptionDao.class);</span>

    private int noOfRecords;


    public List&lt;Tariff&gt; getAllTariffs(int subs) {
<span class="nc" id="L36">        logger.debug(&quot;Start  searching all tariffs ...&quot;);</span>
<span class="nc" id="L37">        List&lt;Tariff&gt; tariffs = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L38">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L39">             PreparedStatement pst = con.prepareStatement(SELECT_ALL_TARIFFS_QUERY);) {</span>
<span class="nc" id="L40">            pst.setInt(1, subs);</span>
<span class="nc" id="L41">            ResultSet result = pst.executeQuery();</span>
<span class="nc bnc" id="L42" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L43">                int id = result.getInt(&quot;tariff_id&quot;);</span>
<span class="nc" id="L44">                tariffs.add(tariffDao.findById(id));</span>
<span class="nc" id="L45">            }</span>
<span class="nc" id="L46">        } catch (Exception ex) {</span>
<span class="nc" id="L47">            logger.debug(&quot;Problem with getting all tariffs for subscription: &quot; + ex.getMessage());</span>
<span class="nc" id="L48">        }</span>
<span class="nc" id="L49">        logger.debug(&quot;All tariffs for subscription found&quot;);</span>
<span class="nc" id="L50">        return tariffs;</span>
    }


    public void addTariff(int sub_id, int tariff_id) throws SubscriptionException {
<span class="nc" id="L55">        logger.debug(&quot;Start subscription creating&quot;);</span>
<span class="nc bnc" id="L56" title="All 2 branches missed.">        if (tariff_id == 0) {</span>
<span class="nc" id="L57">            logger.error(&quot;Illegal Argument!!!&quot;);</span>
<span class="nc" id="L58">            throw new IllegalArgumentException();</span>
        }
<span class="nc" id="L60">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L61">             PreparedStatement pst = con.prepareStatement(ADD_TARIFF_QUERY);) {</span>
<span class="nc" id="L62">            pst.setInt(1, sub_id);</span>
<span class="nc" id="L63">            pst.setInt(2, tariff_id);</span>
<span class="nc" id="L64">            int status = pst.executeUpdate();</span>
<span class="nc bnc" id="L65" title="All 2 branches missed.">            if (status != 1) throw new SubscriptionException(&quot;Created more than one record!!&quot;);</span>
<span class="nc" id="L66">        } catch (Exception ex) {</span>
<span class="nc" id="L67">            logger.debug(&quot;Problem with adding tariff to subscription: &quot; + ex.getMessage());</span>
<span class="nc" id="L68">            throw new SubscriptionException(ex.getMessage(), ex);</span>
<span class="nc" id="L69">        }</span>
<span class="nc" id="L70">        logger.debug(&quot;subscription created&quot;);</span>
<span class="nc" id="L71">    }</span>

    @Override
    public Subscription create(Subscription subscription) throws SubscriptionException {
<span class="nc" id="L75">        logger.debug(&quot;Start subscription creating&quot;);</span>
<span class="nc bnc" id="L76" title="All 2 branches missed.">        if (subscription == null) {</span>
<span class="nc" id="L77">            logger.error(&quot;subscription not found&quot;);</span>
<span class="nc" id="L78">            throw new SubscriptionException(&quot;subscription is not found&quot;);</span>
        }
<span class="nc" id="L80">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L81">             PreparedStatement pst = con.prepareStatement(CREATE_QUERY, PreparedStatement.RETURN_GENERATED_KEYS);) {</span>

<span class="nc" id="L83">            pst.setString(1, subscription.getName());</span>
<span class="nc" id="L84">            pst.setInt(2, subscription.getDays_amount());</span>
<span class="nc" id="L85">            pst.setBoolean(3, subscription.isActive());</span>
<span class="nc" id="L86">            pst.setTimestamp(4, subscription.convertToTimestamp(subscription.getCreated()));</span>
<span class="nc" id="L87">            pst.setTimestamp(5, subscription.convertToTimestamp(subscription.getUpdated()));</span>

<span class="nc" id="L89">            int status = pst.executeUpdate();</span>

<span class="nc bnc" id="L91" title="All 2 branches missed.">            if (status != 1) throw new SubscriptionException(&quot;Created more than one record!!&quot;);</span>
<span class="nc" id="L92">            ResultSet keys = pst.getGeneratedKeys();</span>
<span class="nc bnc" id="L93" title="All 2 branches missed.">            if (keys.next()) {</span>
<span class="nc" id="L94">                int id = keys.getInt(1);</span>
<span class="nc" id="L95">                subscription.setId(id);</span>
<span class="nc" id="L96">                System.out.println(subscription.getId());</span>
            }
<span class="nc" id="L98">        } catch (Exception ex) {</span>
<span class="nc" id="L99">            logger.debug(&quot;Problem with creating subscription: &quot; + ex.getMessage());</span>
<span class="nc" id="L100">            throw new SubscriptionException(ex.getMessage(), ex);</span>
<span class="nc" id="L101">        }</span>
<span class="nc" id="L102">        logger.debug(&quot;subscription created&quot;);</span>
<span class="nc" id="L103">        return subscription;</span>
    }


    @Override
    public Subscription findByField(String value) {
<span class="nc" id="L109">        Subscription subscription = new Subscription();</span>
<span class="nc" id="L110">        logger.debug(&quot;Start subscription searching....&quot;);</span>
<span class="nc" id="L111">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L112">             PreparedStatement pst = con.prepareStatement(FIND_BY_FIELD_QUERY);) {</span>
<span class="nc" id="L113">            pst.setString(1, value);</span>
<span class="nc" id="L114">            ResultSet resultSet = pst.executeQuery();</span>
<span class="nc" id="L115">            resultSet.next();</span>
<span class="nc" id="L116">            subscription.setId(resultSet.getInt(&quot;id&quot;));</span>
<span class="nc" id="L117">            subscription.setName(resultSet.getString(&quot;name&quot;));</span>
<span class="nc" id="L118">            subscription.setDays_amount(resultSet.getInt(&quot;days_amount&quot;));</span>
<span class="nc" id="L119">            subscription.setActive(resultSet.getBoolean(&quot;isActive&quot;));</span>
<span class="nc" id="L120">            subscription.setCreated(LocalDateTime.parse(resultSet.getString(&quot;created&quot;)));</span>
<span class="nc" id="L121">            subscription.setUpdated(LocalDateTime.parse(resultSet.getString(&quot;updated&quot;)));</span>
<span class="nc" id="L122">            subscription.setTariffs(getAllTariffs(subscription.getId()));</span>
<span class="nc" id="L123">        } catch (Exception ex) {</span>
<span class="nc" id="L124">            logger.debug(&quot;Problem with searching subscription: &quot; + ex.getMessage());</span>
<span class="nc" id="L125">        }</span>
<span class="nc" id="L126">        logger.debug(&quot;subscription searched&quot;);</span>
<span class="nc" id="L127">        System.out.println(subscription.toString());</span>
<span class="nc" id="L128">        return subscription;</span>
    }

    public Subscription findById(int id) {
<span class="nc" id="L132">        Subscription subscription = new Subscription();</span>
<span class="nc" id="L133">        logger.debug(&quot;Start subscription searching....&quot;);</span>
<span class="nc" id="L134">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L135">             PreparedStatement pst = con.prepareStatement(FIND_BY_ID_QUERY);) {</span>
<span class="nc" id="L136">            pst.setInt(1, id);</span>
<span class="nc" id="L137">            ResultSet resultSet = pst.executeQuery();</span>
<span class="nc" id="L138">            resultSet.next();</span>
<span class="nc" id="L139">            subscription.setId(resultSet.getInt(&quot;id&quot;));</span>
<span class="nc" id="L140">            subscription.setName(resultSet.getString(&quot;name&quot;));</span>
<span class="nc" id="L141">            subscription.setDays_amount(resultSet.getInt(&quot;days_amount&quot;));</span>
<span class="nc" id="L142">            subscription.setActive(resultSet.getBoolean(&quot;isActive&quot;));</span>
<span class="nc" id="L143">            subscription.setCreated(resultSet.getTimestamp(&quot;created&quot;).toLocalDateTime());</span>
<span class="nc" id="L144">            subscription.setUpdated(resultSet.getTimestamp(&quot;updated&quot;).toLocalDateTime());</span>
<span class="nc" id="L145">            subscription.setTariffs(getAllTariffs(subscription.getId()));</span>
<span class="nc" id="L146">        } catch (Exception ex) {</span>
<span class="nc" id="L147">            logger.debug(&quot;Problem with searching subscription: &quot; + ex.getMessage());</span>
<span class="nc" id="L148">        }</span>
<span class="nc" id="L149">        logger.debug(&quot;subscription searched&quot;);</span>
<span class="nc" id="L150">        System.out.println(subscription);</span>
<span class="nc" id="L151">        return subscription;</span>
    }

    @Override
    public Subscription update(Subscription sub) {

<span class="nc" id="L157">        logger.debug(&quot;Start  subscription updating....&quot;);</span>
<span class="nc" id="L158">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L159">             PreparedStatement pst = con.prepareStatement(UPDATE_QUERY_ID);) {</span>

<span class="nc" id="L161">            pst.setString(1, sub.getName());</span>
<span class="nc" id="L162">            pst.setInt(2, sub.getDays_amount());</span>
<span class="nc" id="L163">            pst.setBoolean(3, sub.isActive());</span>
<span class="nc" id="L164">            pst.setInt(4, sub.getId());</span>


<span class="nc" id="L167">            int status = pst.executeUpdate();</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">            if (status != 1) throw new SubscriptionException(&quot;Updated more than one record!!&quot;);</span>

<span class="nc" id="L170">        } catch (Exception ex) {</span>
<span class="nc" id="L171">            logger.error(&quot;Problem with updating  subscription: &quot; + ex.getMessage());</span>
<span class="nc" id="L172">        }</span>
<span class="nc" id="L173">        logger.debug(&quot; subscription updated&quot;);</span>
<span class="nc" id="L174">        return sub;</span>
    }

    public Subscription updateSub(Subscription sub, String oldName) {
<span class="nc" id="L178">        Subscription subscription = new Subscription();</span>

<span class="nc" id="L180">        logger.debug(&quot;Start  subscription updating....&quot;);</span>
<span class="nc" id="L181">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L182">             PreparedStatement pst = con.prepareStatement(UPDATE_QUERY);) {</span>

<span class="nc" id="L184">            pst.setString(1, sub.getName());</span>
<span class="nc" id="L185">            logger.debug(&quot;set name ==&gt; &quot; + sub.getName());</span>
<span class="nc" id="L186">            pst.setInt(2, sub.getDays_amount());</span>
<span class="nc" id="L187">            pst.setBoolean(3, sub.isActive());</span>
<span class="nc" id="L188">            pst.setString(4, oldName);</span>
<span class="nc" id="L189">            logger.debug(&quot;set old name ==&gt; &quot; + oldName);</span>

<span class="nc" id="L191">            subscription.setName(sub.getName());</span>
<span class="nc" id="L192">            subscription.setDays_amount(sub.getDays_amount());</span>
<span class="nc" id="L193">            subscription.setActive(sub.isActive());</span>

<span class="nc" id="L195">            int status = pst.executeUpdate();</span>
<span class="nc bnc" id="L196" title="All 2 branches missed.">            if (status != 1) throw new SubscriptionException(&quot;Updated more than one record!!&quot;);</span>

<span class="nc" id="L198">        } catch (Exception ex) {</span>
<span class="nc" id="L199">            logger.debug(&quot;Problem with updating  subscription: &quot; + ex.getMessage());</span>
<span class="nc" id="L200">        }</span>
<span class="nc" id="L201">        logger.debug(&quot; subscription updated&quot;);</span>
<span class="nc" id="L202">        return subscription;</span>
    }

    @Override
    public boolean delete(int id) {
<span class="nc" id="L207">        boolean status_boolean = false;</span>
<span class="nc" id="L208">        logger.debug(&quot;Start subscriptions deleting....&quot;);</span>

<span class="nc" id="L210">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L211">             PreparedStatement pst = con.prepareStatement(DELETE_QUERY);) {</span>
<span class="nc" id="L212">            pst.setInt(1, id);</span>

<span class="nc" id="L214">            int status = pst.executeUpdate();</span>
<span class="nc bnc" id="L215" title="All 2 branches missed.">            if (status == 1) {</span>
<span class="nc" id="L216">                status_boolean = true;</span>
            }
<span class="nc bnc" id="L218" title="All 2 branches missed.">            if (status != 1) throw new UserException(&quot;Deleted more than one record!!&quot;);</span>
<span class="nc" id="L219">            con.close();</span>
<span class="nc" id="L220">        } catch (Exception ex) {</span>
<span class="nc" id="L221">            logger.debug(&quot;Problem with deleting subscriptions: &quot; + ex.getMessage());</span>
<span class="nc" id="L222">        }</span>

<span class="nc" id="L224">        logger.debug(&quot;Subscriptions deleted&quot;);</span>
<span class="nc" id="L225">        return status_boolean;</span>
    }

    @Override
    public List&lt;Subscription&gt; findAll() {
<span class="nc" id="L230">        logger.debug(&quot;Start  searching all subscriptions...&quot;);</span>
<span class="nc" id="L231">        List&lt;Subscription&gt; subscriptionsList = null;</span>

<span class="nc" id="L233">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L234">             PreparedStatement pst = con.prepareStatement(FIND_ALL_QUERY);) {</span>
<span class="nc" id="L235">            ResultSet result = pst.executeQuery();</span>
<span class="nc" id="L236">            subscriptionsList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L237">            Subscription subscription = null;</span>
<span class="nc bnc" id="L238" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L239">                subscription = new Subscription();</span>
<span class="nc" id="L240">                subscription.setId(result.getInt(&quot;id&quot;));</span>
<span class="nc" id="L241">                subscription.setName(result.getString(&quot;name&quot;));</span>
<span class="nc" id="L242">                subscription.setId(result.getInt(&quot;days_amount&quot;));</span>
<span class="nc" id="L243">                subscription.setActive(result.getBoolean(&quot;isActive&quot;));</span>
<span class="nc" id="L244">                subscription.setCreated(result.getTimestamp(&quot;created&quot;).toLocalDateTime());</span>
<span class="nc" id="L245">                subscription.setUpdated(result.getTimestamp(&quot;updated&quot;).toLocalDateTime());</span>
<span class="nc" id="L246">                subscriptionsList.add(subscription);</span>
            }
<span class="nc" id="L248">        } catch (Exception ex) {</span>
<span class="nc" id="L249">            logger.debug(&quot;Problem with searching all subscriptions: &quot; + ex.getMessage());</span>
<span class="nc" id="L250">        }</span>
<span class="nc" id="L251">        logger.debug(&quot;All subscriptions searched&quot;);</span>
<span class="nc" id="L252">        System.out.println(subscriptionsList);</span>

<span class="nc" id="L254">        return subscriptionsList;</span>
    }

    public List&lt;Subscription&gt; getAll(int offset, int noOfRecords) {

<span class="nc" id="L259">        Connection con = null;</span>
<span class="nc" id="L260">        Statement statement = null;</span>
<span class="nc" id="L261">        PreparedStatement pstmt = null;</span>
<span class="nc" id="L262">        ResultSet resultSet = null;</span>

        try {
<span class="nc" id="L265">            con = DataSource.getConnection();</span>
<span class="nc" id="L266">        } catch (SQLException e) {</span>
<span class="nc" id="L267">            e.printStackTrace();</span>
<span class="nc" id="L268">        }</span>

<span class="nc" id="L270">        List&lt;Subscription&gt; subscriptionList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L271">        Subscription subscription = null;</span>
        try {
<span class="nc" id="L273">            pstmt = con.prepareStatement(SQL_CALC_FOUND_ROWS);</span>
<span class="nc" id="L274">            statement = con.createStatement();</span>
<span class="nc" id="L275">            pstmt.setInt(1, offset);</span>
<span class="nc" id="L276">            pstmt.setInt(2, noOfRecords);</span>

<span class="nc" id="L278">            resultSet = pstmt.executeQuery();</span>


<span class="nc bnc" id="L281" title="All 2 branches missed.">            while (resultSet.next()) {</span>
<span class="nc" id="L282">                int id = resultSet.getInt(&quot;id&quot;);</span>
<span class="nc" id="L283">                String name = resultSet.getString(&quot;name&quot;);</span>
<span class="nc" id="L284">                int days_amount = resultSet.getInt(&quot;days_amount&quot;);</span>
<span class="nc" id="L285">                boolean isActive = resultSet.getBoolean(&quot;isActive&quot;);</span>
<span class="nc" id="L286">                LocalDateTime created = resultSet.getTimestamp(&quot;created&quot;).toLocalDateTime();</span>
<span class="nc" id="L287">                LocalDateTime updated = resultSet.getTimestamp(&quot;updated&quot;).toLocalDateTime();</span>

<span class="nc" id="L289">                subscription = new Subscription(id, name, days_amount, isActive, created, updated);</span>
<span class="nc" id="L290">                subscriptionList.add(subscription);</span>
<span class="nc" id="L291">            }</span>
<span class="nc" id="L292">            resultSet = statement.executeQuery(&quot;SELECT FOUND_ROWS()&quot;);</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">            if (resultSet.next()) {</span>
<span class="nc" id="L294">                this.noOfRecords = resultSet.getInt(1);</span>
            }

<span class="nc" id="L297">        } catch (SQLException e) {</span>
<span class="nc" id="L298">            e.printStackTrace();</span>
        } finally {
            try {
<span class="nc bnc" id="L301" title="All 2 branches missed.">                if (con != null)</span>
<span class="nc" id="L302">                    con.close();</span>
<span class="nc bnc" id="L303" title="All 2 branches missed.">                if (resultSet != null)</span>
<span class="nc" id="L304">                    resultSet.close();</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">                if (pstmt != null)</span>
<span class="nc" id="L306">                    pstmt.close();</span>
<span class="nc bnc" id="L307" title="All 2 branches missed.">                if (statement != null)</span>
<span class="nc" id="L308">                    statement.close();</span>
<span class="nc" id="L309">            } catch (SQLException e) {</span>
<span class="nc" id="L310">                e.printStackTrace();</span>
<span class="nc" id="L311">            }</span>
        }
<span class="nc" id="L313">        return subscriptionList;</span>

    }

    public int getNoOfRecords() {
<span class="nc" id="L318">        return noOfRecords;</span>
    }

    public List&lt;Tariff&gt; getAllByService(int id) {
<span class="nc" id="L322">        logger.debug(&quot;Start  searching all tariffs...&quot;);</span>
<span class="nc" id="L323">        List&lt;Tariff&gt; tariffList = new ArrayList&lt;&gt;();</span>

<span class="nc" id="L325">        try (Connection con = DataSource.getConnection();</span>
<span class="nc" id="L326">             PreparedStatement pst = con.prepareStatement(FIND_ALL_BY_SERVICE);) {</span>
<span class="nc" id="L327">            SubscriptionDao subscriptionDao = new SubscriptionDao();</span>
<span class="nc" id="L328">            pst.setString(1, findById(id).getName());</span>

<span class="nc" id="L330">            ResultSet result = pst.executeQuery();</span>
<span class="nc" id="L331">            Tariff tariff = null;</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">            while (result.next()) {</span>
<span class="nc" id="L333">                tariff = new Tariff();</span>
<span class="nc" id="L334">                tariff.setId(result.getInt(&quot;id&quot;));</span>
<span class="nc" id="L335">                tariff.setName(result.getString(&quot;name&quot;));</span>
<span class="nc" id="L336">                tariff.setType(ServiceType.valueOf(result.getString(&quot;service_type&quot;)));</span>
<span class="nc" id="L337">                tariff.setPricePerDay(result.getInt(&quot;price_per_day&quot;));</span>
<span class="nc" id="L338">                tariff.setActive(result.getBoolean(&quot;isActive&quot;));</span>
<span class="nc" id="L339">                tariff.setCreated(result.getTimestamp(&quot;created&quot;).toLocalDateTime());</span>
<span class="nc" id="L340">                tariff.setUpdated(result.getTimestamp(&quot;updated&quot;).toLocalDateTime());</span>

<span class="nc" id="L342">                tariffList.add(tariff);</span>
            }
<span class="nc" id="L344">        } catch (Exception ex) {</span>
<span class="nc" id="L345">            logger.debug(&quot;Problem with searching all tariffs: &quot; + ex.getMessage());</span>
<span class="nc" id="L346">        }</span>
<span class="nc" id="L347">        logger.debug(&quot;All tariffs searched&quot;);</span>
<span class="nc" id="L348">        return tariffList;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>